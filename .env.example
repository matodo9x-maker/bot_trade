# =========================
# TELEGRAM (optional)
# =========================
TELEGRAM_ENABLED=1
TELEGRAM_BOT_TOKEN=8540768975:AAG-7gSmwIIUBdCEhiU-5A2kinhVg2ydb7I
TELEGRAM_CHAT_ID=1086291342
TELEGRAM_PARSE_MODE=Markdown

# =========================
# RUNTIME MODE
# =========================
ENV=prod
BOT_MODE=paper   # demo | data | paper | live
# Single-symbol fallback
BOT_SYMBOL=BTCUSDT
# Multi-symbol trading/collection:
# - Comma-separated list: BTCUSDT,ETHUSDT,SOLUSDT
# - Or "AUTO" to let the bot select 1â€“3 symbols based on liquidity/volatility/correlation
BOT_SYMBOLS=AUTO

# Universe selection (only used when BOT_SYMBOLS=AUTO)
# Selector version: 1 (legacy) or 2 (recommended) or 3 (richer signals: OI/accel/funding-z/vol-burst)
UNIVERSE_SELECTOR_VERSION=3

UNIVERSE_TARGET_SYMBOLS=6
UNIVERSE_REFRESH_MIN=360          # re-select symbols every N minutes
UNIVERSE_MIN_QUOTE_VOL_USDT=20000000
# v1-specific volatility filter (daily ATR%)
UNIVERSE_MIN_DAILY_ATR_PCT=0.01   # 1% daily ATR
UNIVERSE_MAX_CORR=0.85
UNIVERSE_LOOKBACK_DAYS=30
UNIVERSE_ATR_PERIOD=14
UNIVERSE_MAX_CANDIDATES_BY_LIQ=80  # compute OHLCV/ATR only for top-N by liquidity

# v2-specific market quality + volatility settings (recommended)
UNIVERSE_MAX_SPREAD_PCT=0.0025     # ~0.25% spread cap (best-effort, requires bid/ask)
UNIVERSE_MAX_ABS_FUNDING=0.0020    # abs(funding) cap (best-effort)
UNIVERSE_MIN_LAST_PRICE=0
UNIVERSE_ATR_TF=1h
UNIVERSE_ATR_LIMIT=200
UNIVERSE_MIN_ATR_PCT=0.004         # ATR% on UNIVERSE_ATR_TF
UNIVERSE_CORR_TF=1h
UNIVERSE_CORR_LIMIT=250
UNIVERSE_STICKY_ENABLED=1
UNIVERSE_STICKY_KEEP=2

# v3-specific ranking signals (best-effort; uses cached history from universe_cycles.jsonl)
UNIVERSE_HISTORY_POINTS=64
UNIVERSE_CYCLES_HISTORY_MAX_ROWS=5000

# v3 weights (tune if needed)
UNIVERSE_W_LIQ=1.0
UNIVERSE_W_ATR=2.0
UNIVERSE_W_VOL_BURST=0.7
UNIVERSE_W_VOL_ACCEL=0.8
UNIVERSE_W_OI=0.7
UNIVERSE_W_OI_ACCEL=0.6
UNIVERSE_W_FUND_ABS_PEN=1.2
UNIVERSE_W_FUND_Z_PEN=0.7
UNIVERSE_W_SPREAD_PEN=1.0
# Optional manual overrides
UNIVERSE_INCLUDE_SYMBOLS=
UNIVERSE_EXCLUDE_SYMBOLS=
# Exclude stablecoin bases (comma-separated)
UNIVERSE_EXCLUDE_BASES=USDC,BUSD,TUSD,FDUSD,DAI,USDP,USDE,USTC

BOT_CYCLE_SEC=300
BOT_LTF=5m
BOT_HTF_LIST=15m,1h,4h
BOT_POLICY=hybrid   # rule | hybrid
HYBRID_CONF_MODE=mul  # mul|model|rule (mul = rule_confidence * model_score)
BOT_FEATURE_SPEC=trade_ai/feature_engineering/feature_spec_v1.yaml

# =========================
# EXCHANGE
# =========================
EXCHANGE=binance     # binance | bybit | mexc
EXCHANGE_TESTNET=1   # 1=testnet/sandbox (if supported)
EXCHANGE_RATE_LIMIT=1
EXCHANGE_TIMEOUT_MS=30000

# Hard guard for live trading
LIVE_CONFIRM=0

# =========================
# EXCHANGE KEYS (future)
# =========================
BINANCE_API_KEY=
BINANCE_API_SECRET=
BINANCE_API_PASSWORD=
BYBIT_API_KEY=
BYBIT_API_SECRET=
BYBIT_API_PASSWORD=
MEXC_API_KEY=
MEXC_API_SECRET=
MEXC_API_PASSWORD=

# =========================
# RISK ENGINE (low budget friendly defaults)
# =========================
RISK_PER_TRADE_PCT=0.25     # % equity per trade (0.25% = 0.0025)
RISK_PER_TRADE_USDT=        # optional fixed risk (e.g. 0.5)
LEVERAGE=3
MAX_LEVERAGE=10
MARGIN_UTILIZATION=0.30     # use up to 30% of free USDT as margin
MAX_NOTIONAL_USDT=

# Cap exposure per symbol as % of equity (recommended <= 20)
MAX_EXPOSURE_PCT_PER_SYMBOL=20

MIN_CONFIDENCE=0.55
MIN_NOTIONAL_POLICY=skip    # skip | override_with_cap
MAX_RISK_MULTIPLIER_ON_OVERRIDE=2.0
MAX_RISK_OVERRIDE_USDT=

MAX_OPEN_POSITIONS=1
FEE_RATE=0.0006

# Risk guard (optional)
RISK_GUARD_PAPER=0          # 0=disable guard in paper (default), 1=enable same guard in paper
MAX_DAILY_LOSS_USDT=
MAX_DAILY_LOSS_PCT=
MAX_CONSECUTIVE_LOSSES=3
COOLDOWN_SEC=0
MAX_TRADES_PER_DAY=

# Paper trading account
PAPER_EQUITY_USDT=100
PAPER_FREE_USDT=100

# =========================
# ML SCORER
# =========================
SCORER_MODEL_PATH=data/models/scorer_xgb_v1.json
SCORER_MODEL_TYPE=auto      # auto|xgb|lgbm|sklearn

# =========================
# Output paths (optional)
# =========================
BOT_SNAPSHOT_DIR=data/runtime/snapshots
BOT_TRADES_OPEN=data/runtime/trades_open.csv
BOT_TRADES_CLOSED=data/runtime/trades_closed.csv
BOT_RL_DATASET_PATH=data/datasets/rl/rl_dataset_v2.parquet
BOT_SCORER_DATASET_PATH=data/datasets/supervised/scorer_dataset_v1.parquet
BOT_MARKET_DATASET_PATH=data/datasets/market/market_features_v1.parquet
BOT_DECISION_LOG_PATH=data/runtime/decision_cycles.jsonl
BOT_ORDERS_LOG_PATH=data/runtime/orders.jsonl
BOT_EXECUTIONS_LOG_PATH=data/runtime/executions.jsonl
BOT_MARKET_EACH_CYCLE_PATH=data/datasets/market/market_each_cycle_v1.parquet

# Universe logs (AUTO mode)
BOT_UNIVERSE_LOG_PATH=data/runtime/universe_selection.jsonl
BOT_UNIVERSE_CYCLES_PATH=data/runtime/universe_cycles.jsonl
BOT_UNIVERSE_LAST_PATH=data/runtime/universe_last.json

# Universe datasets (optional)
BOT_UNIVERSE_EACH_CYCLE_PATH=data/datasets/universe/universe_each_cycle_v1.parquet
